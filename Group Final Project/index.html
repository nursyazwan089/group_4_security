<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reverse Frequency Cipher</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background: linear-gradient(to right, #e3f2fd, #fce4ec);
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            animation: fadeIn 0.8s ease;
        }
        .card {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 700px;
            width: 95%;
        }
        h2 {
            text-align: center;
            margin-bottom: 10px;
            font-weight: 700;
        }
        p.description {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }
        label {
            font-weight: bold;
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
        }
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            resize: vertical;
            font-size: 16px;
            box-sizing: border-box;
        }
        .radio-group {
            margin-top: 15px;
            font-size: 16px;
        }
        .radio-group label {
            font-weight: normal;
            margin-right: 15px;
        }
        input[type="submit"], .btn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }
        input[type="submit"]:hover,
        .btn:hover {
            background-color: #43a047;
        }
        #explanation, #preview-section {
            display: none;
            margin-top: 20px;
            color: #555;
            font-size: 14px;
        }
        ul#frequency {
            list-style-type: none;
            padding-left: 0;
            margin-top: 10px;
            font-family: monospace;
            columns: 2;
        }
        pre.mapping {
            background: #f1f1f1;
            padding: 10px;
            border-radius: 8px;
            white-space: pre-wrap;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fun-fact {
            margin-top: 30px;
            font-size: 14px;
            color: #777;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="card">
        <h2>üîê Reverse Frequency Cipher</h2>
        <p class="description">Encrypt or decrypt your message using character frequency reversal. Learn how it works!</p>

        <form action="cipher.php" method="post">
            <label for="plaintext">Enter Text:</label>
            <textarea name="plaintext" rows="5" required id="text-input"></textarea>

            <div class="radio-group">
                <label><input type="radio" name="mode" value="encrypt" checked> Encrypt</label>
                <label><input type="radio" name="mode" value="decrypt"> Decrypt</label>
            </div>

            <input type="submit" value="üîê Submit">
            <button type="button" class="btn" onclick="insertSample()">üß™ Try Sample Text</button>
            <button type="button" class="btn" onclick="toggleExplanation()">‚ùì How It Works</button>
        </form>

        <!-- Educational Section -->
        <div id="explanation">
            <h3>üîç What is Reverse Frequency Cipher?</h3>
            <p>This cipher works by analyzing how often each character appears in your message. The most common character is swapped with the least common, the second most with the second least, and so on.</p>
            <p>It's a simple form of substitution cipher that teaches how frequency analysis can both create and break basic encryption.</p>

            <h4>üìä Live Letter Frequency:</h4>
            <ul id="frequency">
                <li>No input yet</li>
            </ul>

            <h4>üîÅ Sample Mapping:</h4>
            <pre class="mapping">
e ‚Üî t
a ‚Üî o
i ‚Üî n
s ‚Üî h
r ‚Üî d
l ‚Üî c
...
            </pre>
        </div>

        <!-- Fun Fact -->
        <div class="fun-fact">
            üí° Did you know? Julius Caesar used one of the first ciphers in history ‚Äî shifting letters by 3 positions!
        </div>
    </div>

    <script>
        function toggleExplanation() {
            const box = document.getElementById("explanation");
            box.style.display = (box.style.display === "none") ? "block" : "none";
        }

        function insertSample() {
            const sample = "This is a sample sentence to test the reverse frequency cipher.";
            document.getElementById("text-input").value = sample;
            document.getElementById("text-input").dispatchEvent(new Event("input"));
        }

        document.getElementById("text-input").addEventListener("input", function () {
            let text = this.value.toLowerCase().replace(/[^a-z]/g, '');
            let freq = {};
            for (let char of text) {
                freq[char] = (freq[char] || 0) + 1;
            }

            let output = '';
            Object.entries(freq)
                .sort((a, b) => b[1] - a[1])
                .forEach(([char, count]) => {
                    output += `<li>${char}: ${count}</li>`;
                });

            document.getElementById("frequency").innerHTML = output || '<li>No letters yet</li>';
        });
    </script>
</body>
</html>